<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XMLSpy v2006 sp2 U (http://www.altova.com)-->
<testSuite xsi:schemaLocation="http://www.bpelunit.org/schema/testSuite C:\java\bpelunitws\net.bpelunit.framework\schema\TestSuite.xsd" xmlns="http://www.bpelunit.org/schema/testSuite" xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cred="http://examples.bpelunit.org/CreditRatingService">
    <name>Credit Rating Service Send/Receive Synchronous BPELUnit Test</name>
    <deployment>
        <put type="testmode" name="CreditRatingService">
            <wsdl>CreditRatingService.wsdl</wsdl>
        </put>
        <partner name="CreditRatingService" wsdl="CreditRatingService.wsdl"/>
    </deployment>
    <testCases>
        <testCase name="Test with a normal SSN" xmlns:crs="http://examples.bpelunit.org/CreditRatingService">
            <clientTrack>
                <sendReceive service="crs:CreditRatingService" port="CreditRatingServicePort" operation="process">
                    <send>
                        <data>
                            <crs:ssn>123456</crs:ssn>
                        </data>
                    </send>
                    <receive>
                        <condition>
                            <expression>crs:rating</expression>
                            <value>495</value>
                        </condition>
                    </receive>
                </sendReceive>
            </clientTrack>
            <partnerTrack name="CreditRatingService">
                <receiveSend port="CreditRatingServicePort" operation="process" service="crs:CreditRatingService">
                    <mapping>
                        <copy from="crs:ssn" to="crs:rating/@ssn"/>
                    </mapping>
                    <receive>
                        <!--Assure the SSN got transferred correctly...-->
                        <condition>
                            <expression>crs:ssn/text()</expression>
                            <value>'123456'</value>
                        </condition>
                    </receive>
                    <send>
                        <data>
                            <crs:rating ssn="">495</crs:rating>
                        </data>
                    </send>
                </receiveSend>
            </partnerTrack>
        </testCase>
        <testCase name="Test with a null-SSN" xmlns:crs="http://examples.bpelunit.org/CreditRatingService">
            <clientTrack>
                <sendReceive service="crs:CreditRatingService" port="CreditRatingServicePort" operation="process">
                    <send>
                        <data>
                            <crs:ssn>0</crs:ssn>
                        </data>
                    </send>
                    <receive fault="true" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                        <!--All receive conditions are now evaluated from the soap:Body element, even if they
						  are faults. This is more consistent and allows the user to check XPath asserts on
						  any part of the SOAP fault message.-->
                        <condition>
                            <expression>soapenv:Fault/detail/crs:error/text()</expression>
                            <value>'SSN may not be null.'</value>
                        </condition>
                    </receive>
                </sendReceive>
            </clientTrack>
            <partnerTrack name="CreditRatingService">
                <receiveSend port="CreditRatingServicePort" operation="process" service="crs:CreditRatingService">
                    <receive>
                        <!--Assure the SSN got transferred correctly...-->
                        <condition>
                            <expression>crs:ssn/text()</expression>
                            <value>'0'</value>
                        </condition>
                    </receive>
                    <send fault="true">
                        <data>
                            <crs:error>SSN may not be null.</crs:error>
                        </data>
                    </send>
                </receiveSend>
            </partnerTrack>
        </testCase>
    </testCases>
</testSuite>